# åˆ†è´¦åº”ç”¨è®¾è®¡ä¼åˆ’ä¹¦

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç›®æ ‡
å¼€å‘ä¸€ä¸ªç§»åŠ¨ç«¯å‹å¥½çš„åˆ†è´¦åº”ç”¨ï¼Œæ”¯æŒå¤šäººåˆ†è´¦ã€çµæ´»è°ƒæ•´ã€æ™ºèƒ½ç»“ç®—å’Œæœ€å°‘è½¬è´¦æ­¥æ•°ä¼˜åŒ–ã€‚

### 1.2 æŠ€æœ¯æ ˆ
- **æž„å»ºå·¥å…·**: Vite
- **æ¡†æž¶**: Vue 3 + TypeScript
- **æ ·å¼**: Tailwind CSS
- **äº¤äº’**: å·¦å³æ»‘åŠ¨åˆ‡æ¢ã€åž‚ç›´æ»šåŠ¨

---

## äºŒã€æ•°æ®ç»“æž„è®¾è®¡

### 2.1 æ ¸å¿ƒæ•°æ®æ¨¡åž‹

```typescript
// äººå‘˜æ¨¡åž‹
interface Person {
  id: string;              // å”¯ä¸€æ ‡è¯†
  name: string;            // æ˜¾ç¤ºåç§°ï¼ˆé»˜è®¤éšæœºåŠ¨ç‰©åï¼‰
  avatar?: string;         // å¤´åƒï¼ˆå¯é€‰ï¼‰
}

// ä»˜æ¬¾äººæ˜Žç»†æ¨¡åž‹
interface ExpensePayer {
  personId: string;        // ä»˜æ¬¾äººID
  amount: number;          // è¯¥ä»˜æ¬¾äººæ”¯ä»˜çš„é‡‘é¢
}

// åˆ†è´¦è®°å½•æ¨¡åž‹
interface Expense {
  id: string;              // å”¯ä¸€æ ‡è¯†
  payerId: string;         // ä»˜æ¬¾äººIDï¼ˆå…¼å®¹æ—§æ•°æ®ï¼Œå·²åºŸå¼ƒï¼‰
  payers?: ExpensePayer[]; // ä»˜æ¬¾äººåˆ—è¡¨ï¼ˆå¤šäººæ”¯ä»˜ï¼‰
  description: string;      // é¡¹ç›®æè¿°
  totalAmount: number;     // æ€»é‡‘é¢ï¼ˆè‡ªåŠ¨ä»Žä»˜æ¬¾äººé‡‘é¢æ€»å’Œè®¡ç®—ï¼‰
  expenseDate: Date;       // æ¶ˆè²»æ—¥æœŸ
  createdAt: Date;         // åˆ›å»ºæ—¶é—´ï¼ˆç³»ç»Ÿè®°å½•ï¼‰
  updatedAt: Date;         // æ›´æ–°æ—¶é—´ï¼ˆç³»ç»Ÿè®°å½•ï¼‰
  
  // åˆ†è´¦æ˜Žç»†
  splits: ExpenseSplit[];  // åˆ†è´¦åˆ—è¡¨
}

// åˆ†è´¦æ˜Žç»†æ¨¡åž‹
interface ExpenseSplit {
  personId: string;        // å‚ä¸Žåˆ†è´¦çš„äººå‘˜ID
  amount: number;          // è¯¥äººå‘˜åº”æ‰¿æ‹…é‡‘é¢
  paid: boolean;          // æ˜¯å¦å·²ç§ä¸‹æ”¯ä»˜ï¼ˆç‰¹æ®ŠåŠŸèƒ½ï¼‰
}

// ç»“ç®—ç»“æžœæ¨¡åž‹
interface SettlementResult {
  personId: string;
  netAmount: number;       // å‡€é‡‘é¢ï¼ˆæ­£æ•°=åº”æ”¶ï¼Œè´Ÿæ•°=åº”ç»™ï¼‰
}

// è½¬è´¦æ–¹æ¡ˆæ¨¡åž‹ï¼ˆæœ€å°‘æ­¥æ•°ï¼‰
interface TransferPlan {
  fromPersonId: string;    // è½¬å‡ºäºº
  toPersonId: string;      // è½¬å…¥äºº
  amount: number;          // è½¬è´¦é‡‘é¢
}
```

### 2.2 åº”ç”¨çŠ¶æ€ç®¡ç†

```typescript
interface AppState {
  people: Person[];                    // äººå‘˜åˆ—è¡¨
  expenses: Expense[];                // æ‰€æœ‰åˆ†è´¦è®°å½•
  currentPersonIndex: number;         // å½“å‰æ˜¾ç¤ºçš„äººå‘˜ç´¢å¼•
}
```

---

## ä¸‰ã€æ ¸å¿ƒç®—æ³•è®¾è®¡

### 3.1 åˆ†è´¦è®¡ç®—ç®—æ³•

#### 3.1.1 åŸºç¡€åˆ†è´¦
- **æ€»é‡‘é¢è®¡ç®—**: `totalAmount = sum(payerAmounts)`ï¼ˆä»Žæ‰€æœ‰ä»˜æ¬¾äººé‡‘é¢æ€»å’Œè‡ªåŠ¨è®¡ç®—ï¼‰
- **ç­‰åˆ†**: `amount = totalAmount / splitCount`ï¼ˆå½“æ€»é‡‘é¢å˜åŒ–æˆ–åˆ†è´¦äººå‘˜å˜åŠ¨æ—¶è‡ªåŠ¨å¹³å‡åˆ†é…ï¼‰
- **è‡ªå®šä¹‰**: å…è®¸æ‰‹åŠ¨è°ƒæ•´æ¯ä¸ªäººçš„é‡‘é¢ï¼Œä½†æ€»å’Œå¿…é¡»ç­‰äºŽ `totalAmount`

#### 3.1.2 å¾®è°ƒç®—æ³•
å½“ç”¨æˆ·è°ƒæ•´æŸä¸ªäººçš„é‡‘é¢æ—¶ï¼š
1. è®¡ç®—è°ƒæ•´å·®å€¼ï¼š`delta = newAmount - oldAmount`
2. å°†å·®å€¼åˆ†æ‘Šç»™å…¶ä»–æœªè°ƒæ•´çš„äººï¼ˆç­‰åˆ†æˆ–æŒ‰æ¯”ä¾‹ï¼‰
3. ç¡®ä¿æ€»å’Œä¸å˜

```typescript
function adjustSplit(
  splits: ExpenseSplit[],
  personId: string,
  newAmount: number
): ExpenseSplit[] {
  const split = splits.find(s => s.personId === personId);
  if (!split) return splits;
  
  const delta = newAmount - split.amount;
  const otherSplits = splits.filter(s => s.personId !== personId);
  
  // å°†å·®å€¼åˆ†æ‘Šç»™å…¶ä»–äºº
  const adjustmentPerPerson = -delta / otherSplits.length;
  
  return splits.map(s => {
    if (s.personId === personId) {
      return { ...s, amount: newAmount };
    }
    return { ...s, amount: s.amount + adjustmentPerPerson };
  });
}
```

### 3.2 ç»“ç®—ç®—æ³•

#### 3.2.1 å‡€é‡‘é¢è®¡ç®—
å¯¹äºŽæ¯ä¸ªäººï¼Œè®¡ç®—ï¼š
- **æ€»æ”¯ä»˜**: 
  - å¦‚æžœè´¦ç›®ä½¿ç”¨ `payers` æ•°ç»„ï¼šè¯¥äººåœ¨ `payers` ä¸­çš„ `amount` ä¹‹å’Œ
  - å¦‚æžœè´¦ç›®ä½¿ç”¨ `payerId`ï¼ˆå…¼å®¹æ—§æ•°æ®ï¼‰ï¼šè¯¥äººä½œä¸º `payerId` çš„ `totalAmount` ä¹‹å’Œ
- **æ€»æ‰¿æ‹…**: æ‰€æœ‰è¯¥äººå‚ä¸Žçš„ `ExpenseSplit.amount` ä¹‹å’Œï¼ˆæŽ’é™¤å·²ç§ä¸‹æ”¯ä»˜çš„ï¼‰
- **å‡€é‡‘é¢**: `netAmount = æ€»æ”¯ä»˜ - æ€»æ‰¿æ‹…`
  - `netAmount > 0`: åº”æ”¶ä»–äººé’±
  - `netAmount < 0`: åº”ç»™ä»–äººé’±

```typescript
function calculateNetAmounts(
  people: Person[],
  expenses: Expense[]
): SettlementResult[] {
  return people.map(person => {
    let totalPaid = 0;      // æ€»æ”¯ä»˜
    let totalOwed = 0;      // æ€»æ‰¿æ‹…
    
    expenses.forEach(expense => {
      // è®¡ç®—æ€»æ”¯ä»˜ï¼ˆæ”¯æŒå¤šäººæ”¯ä»˜ï¼‰
      if (expense.payers && expense.payers.length > 0) {
        // å¤šäººæ”¯ä»˜æ¨¡å¼
        const payer = expense.payers.find(p => p.personId === person.id);
        if (payer) {
          totalPaid += payer.amount;
        }
      } else if (expense.payerId === person.id) {
        // å…¼å®¹æ—§æ•°æ®ï¼ˆå•ä¸ªä»˜æ¬¾äººï¼‰
        totalPaid += expense.totalAmount;
      }
      
      // è®¡ç®—æ€»æ‰¿æ‹…ï¼ˆæŽ’é™¤å·²ç§ä¸‹æ”¯ä»˜çš„ï¼‰
      const split = expense.splits.find(s => s.personId === person.id);
      if (split && !split.paid) {
        totalOwed += split.amount;
      }
    });
    
    return {
      personId: person.id,
      netAmount: totalPaid - totalOwed
    };
  });
}
```

### 3.3 æœ€å°‘è½¬è´¦æ­¥æ•°ç®—æ³• â­

è¿™æ˜¯æ ¸å¿ƒç®—æ³•ï¼Œç›®æ ‡æ˜¯ç”¨æœ€å°‘çš„è½¬è´¦æ¬¡æ•°å®Œæˆç»“ç®—ã€‚

#### 3.3.1 é—®é¢˜åˆ†æž
- è¾“å…¥ï¼šæ¯ä¸ªäººçš„å‡€é‡‘é¢ï¼ˆåº”æ”¶/åº”ç»™ï¼‰
- è¾“å‡ºï¼šè½¬è´¦æ–¹æ¡ˆåˆ—è¡¨ï¼Œä½¿å¾—è½¬è´¦æ¬¡æ•°æœ€å°‘

#### 3.3.2 ç®—æ³•æ€è·¯

**æ–¹æ³•ä¸€ï¼šè´ªå¿ƒç®—æ³•ï¼ˆæŽ¨èï¼‰**
1. å°†æ‰€æœ‰å‡€é‡‘é¢æŽ’åºï¼ˆåº”æ”¶çš„é™åºï¼Œåº”ç»™çš„å‡åºï¼‰
2. æ¯æ¬¡è®©æœ€å¤§çš„åº”æ”¶è€…å’Œæœ€å¤§çš„åº”ç»™è€…åŒ¹é…
3. è½¬è´¦é‡‘é¢ = min(åº”æ”¶é‡‘é¢, |åº”ç»™é‡‘é¢|)
4. æ›´æ–°åŒæ–¹ä½™é¢ï¼Œé‡å¤ç›´åˆ°æ‰€æœ‰äººä½™é¢ä¸º0

```typescript
function calculateMinTransfers(
  settlements: SettlementResult[]
): TransferPlan[] {
  const transfers: TransferPlan[] = [];
  
  // åˆ†ç¦»åº”æ”¶å’Œåº”ç»™
  const creditors = settlements
    .filter(s => s.netAmount > 0)
    .sort((a, b) => b.netAmount - a.netAmount);
  
  const debtors = settlements
    .filter(s => s.netAmount < 0)
    .sort((a, b) => a.netAmount - b.netAmount);
  
  let creditorIdx = 0;
  let debtorIdx = 0;
  
  while (creditorIdx < creditors.length && debtorIdx < debtors.length) {
    const creditor = creditors[creditorIdx];
    const debtor = debtors[debtorIdx];
    
    const transferAmount = Math.min(
      creditor.netAmount,
      Math.abs(debtor.netAmount)
    );
    
    transfers.push({
      fromPersonId: debtor.personId,
      toPersonId: creditor.personId,
      amount: transferAmount
    });
    
    // æ›´æ–°ä½™é¢
    creditor.netAmount -= transferAmount;
    debtor.netAmount += transferAmount;
    
    // ç§»åŠ¨æŒ‡é’ˆ
    if (creditor.netAmount === 0) creditorIdx++;
    if (debtor.netAmount === 0) debtorIdx++;
  }
  
  return transfers;
}
```

**æ–¹æ³•äºŒï¼šå›¾è®ºç®—æ³•ï¼ˆæ›´ä¼˜ä½†å¤æ‚ï¼‰**
- å°†é—®é¢˜è½¬åŒ–ä¸ºæœ‰å‘å›¾ï¼Œä½¿ç”¨æœ€å°è´¹ç”¨æµç®—æ³•
- å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–è½¬è´¦æ€»é‡‘é¢ï¼ˆå‡å°‘ä¸­é—´è½¬è´¦ï¼‰

**æŽ¨èä½¿ç”¨æ–¹æ³•ä¸€**ï¼Œå› ä¸ºï¼š
- å®žçŽ°ç®€å•
- æ—¶é—´å¤æ‚åº¦ O(n log n)
- å¯¹äºŽæ—¥å¸¸åˆ†è´¦åœºæ™¯ï¼ˆé€šå¸¸ < 10 äººï¼‰å·²ç»è¶³å¤Ÿé«˜æ•ˆ
- ç»“æžœç›´è§‚æ˜“æ‡‚

---

## å››ã€åŠŸèƒ½æ¨¡å—è®¾è®¡

### 4.1 äººå‘˜ç®¡ç†æ¨¡å—
- **åŠŸèƒ½**:
  - æ·»åŠ äººå‘˜ï¼ˆé»˜è®¤éšæœºé¸Ÿç±»åç§°å’Œemojiï¼‰
  - åˆ é™¤äººå‘˜
  - é‡å‘½åäººå‘˜
  - å·¦å³æ»‘åŠ¨åˆ‡æ¢äººå‘˜è§†å›¾
  - Headeræ˜¾ç¤ºå½“å‰äººå‘˜åç§°
  - äººå‘˜ç½‘æ ¼è§†å›¾ï¼ˆå¿«é€Ÿè·³è½¬å’Œæ–°å¢žï¼‰
  - é‡ç½®åŠŸèƒ½ï¼šæ¢å¤ä¸ºé¢„è®¾ä¸¤åäººå‘˜

- **UIç»„ä»¶**:
  - `PersonCard.vue`: ä¸ªäººå¡ç‰‡ç»„ä»¶
  - `AddPersonCard.vue`: æ·»åŠ äººå‘˜å¡ç‰‡ï¼ˆåŠ å·å›¾æ ‡ï¼‰
  - `PersonSwiper.vue`: æ»‘åŠ¨å®¹å™¨ç»„ä»¶
  - `AppHeader.vue`: é¡¶éƒ¨Headerç»„ä»¶
  - `PersonGridView.vue`: äººå‘˜ç½‘æ ¼è§†å›¾å¼¹çª—
  - `PersonGridItem.vue`: äººå‘˜ç½‘æ ¼é¡¹ç»„ä»¶

### 4.2 è®°è´¦æ¨¡å—
- **åŠŸèƒ½**:
  - åˆ›å»ºåˆ†è´¦è®°å½•
  - é€‰æ‹©å¤šä¸ªä»˜æ¬¾äººï¼ˆæ”¯æŒå¤šäººæ”¯ä»˜ï¼‰
  - ä»˜æ¬¾äººé‡‘é¢è¾“å…¥ï¼ˆæ€»é‡‘é¢è‡ªåŠ¨ä»Žä»˜æ¬¾äººé‡‘é¢æ€»å’Œè®¡ç®—ï¼‰
  - å¡«å†™é¡¹ç›®æè¿°å’Œæ¶ˆè²»æ—¥æœŸï¼ˆå¯ç¼–è¾‘ï¼‰
  - é€‰æ‹©å‚ä¸Žåˆ†è´¦çš„äººå‘˜
  - è‡ªåŠ¨å¹³å‡åˆ†é…åˆ†è´¦é‡‘é¢ï¼ˆå½“æ€»é‡‘é¢å˜åŒ–æˆ–åˆ†è´¦äººå‘˜å˜åŠ¨æ—¶ï¼‰
  - å¾®è°ƒæ¯ä¸ªäººçš„é‡‘é¢
  - è¡¨å•é‡ç½®ï¼ˆæ–°å¢žæ—¶æ¸…ç©ºæ‰€æœ‰å­—æ®µï¼‰

- **UIç»„ä»¶**:
  - `ExpenseForm.vue`: è®°è´¦è¡¨å•
  - `SplitAdjuster.vue`: åˆ†è´¦è°ƒæ•´å™¨
  - `PersonSelector.vue`: äººå‘˜é€‰æ‹©å™¨

### 4.3 è´¦ç›®åˆ—è¡¨æ¨¡å—
- **åŠŸèƒ½**:
  - æ˜¾ç¤ºè¯¥äººå‘˜ç›¸å…³çš„æ‰€æœ‰è´¦ç›®
  - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
  - ç¼–è¾‘è´¦ç›®ï¼ˆåŒ…æ‹¬æ¶ˆè²»æ—¥æœŸï¼‰
  - åˆ é™¤è´¦ç›®
  - æ ‡è®°å·²ç§ä¸‹æ”¯ä»˜

- **UIç»„ä»¶**:
  - `ExpenseList.vue`: è´¦ç›®åˆ—è¡¨
  - `ExpenseItem.vue`: è´¦ç›®é¡¹
  - `ExpenseDetail.vue`: è´¦ç›®è¯¦æƒ…/ç¼–è¾‘

### 4.4 ç»“ç®—æ¨¡å—
- **åŠŸèƒ½**:
  - åº•éƒ¨ç»“ç®—æ æ˜¾ç¤ºå½“å‰äººå‘˜å‡€é‡‘é¢ï¼ˆåº”æ”¶/åº”ç»™ï¼‰
  - ç‚¹å‡»ç»“ç®—æŒ‰é’®æ‰“å¼€ç»“ç®—å¼¹çª—
  - æ˜¾ç¤ºæ‰€æœ‰äººç»“ç®—ç»“æžœ
  - æ˜¾ç¤ºæœ€å°‘è½¬è´¦æ–¹æ¡ˆ
  - é‡ç½®åŠŸèƒ½ï¼ˆæ¸…ç©ºæ‰€æœ‰è´¦ç›®å¹¶æ¢å¤é¢„è®¾äººå‘˜ï¼Œéœ€ç¡®è®¤ï¼‰

- **UIç»„ä»¶**:
  - `SettlementButton.vue`: ç»“ç®—æ ï¼ˆåº•éƒ¨å¸¸é©»ï¼Œæ˜¾ç¤ºå½“å‰äººå‘˜å‡€é‡‘é¢å’Œç»“ç®—æŒ‰é’®ï¼‰
  - `SettlementModal.vue`: ç»“ç®—å¼¹çª—
  - `NetAmountView.vue`: å‡€é‡‘é¢è§†å›¾
  - `TransferPlanView.vue`: è½¬è´¦æ–¹æ¡ˆè§†å›¾

---

## äº”ã€UI/UX è®¾è®¡

### 5.1 å¸ƒå±€ç»“æž„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ¦ éº»é›€      [ðŸ‘ï¸]     â”‚  â† Headerï¼ˆå½“å‰äººå‘˜å + è§†å›¾iconï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚    Person Card View     â”‚  â† å¯å·¦å³æ»‘åŠ¨
â”‚    (Full Screen)        â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Animal Name    â”‚   â”‚  â† å¯ç‚¹å‡»æ”¹å
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  + è®°è´¦         â”‚   â”‚  â† è®°è´¦æ¿å—
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è´¦ç›®1          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è´¦ç›®2          â”‚   â”‚  â† è´¦ç›®åˆ—è¡¨
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                    â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æœ€çµ‚çµç®—: æ‡‰æ”¶ $50.00 â”‚  â† åº•éƒ¨ç»“ç®—æ 
â”‚          [çµç®—]         â”‚  ï¼ˆæ˜¾ç¤ºå½“å‰äººå‘˜å‡€é‡‘é¢ + ç»“ç®—æŒ‰é’®ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

äººå‘˜ç½‘æ ¼è§†å›¾å¼¹çª—ï¼ˆå…¨å±ï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©äººå‘˜          [âœ•]  â”‚  â† å¼¹çª—æ ‡é¢˜ + å…³é—­æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”     â”‚
â”‚  â”‚ðŸ¦ â”‚ â”‚ðŸ¦… â”‚ â”‚ðŸ¦œ â”‚     â”‚
â”‚  â”‚éº»  â”‚ â”‚è€  â”‚ â”‚é¸š  â”‚     â”‚  â† äººå‘˜ç½‘æ ¼
â”‚  â”‚é›€  â”‚ â”‚é·¹  â”‚ â”‚éµ¡  â”‚     â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”           â”‚
â”‚  â”‚ðŸ¦‰ â”‚ â”‚ + â”‚           â”‚
â”‚  â”‚è²“  â”‚ â”‚æ–°  â”‚           â”‚  â† æ–°å¢žäººå‘˜
â”‚  â”‚é ­  â”‚ â”‚å¢ž  â”‚           â”‚
â”‚  â”‚é·¹  â”‚ â”‚    â”‚           â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 äº¤äº’æµç¨‹

1. **æ·»åŠ äººå‘˜**:
   - æ–¹å¼ä¸€ï¼šæ»‘åŠ¨åˆ°ç©ºç™½é¡µ â†’ ç‚¹å‡»åŠ å· â†’ è¾“å…¥åç§° â†’ ç¡®è®¤
   - æ–¹å¼äºŒï¼šç‚¹å‡»Headerè§†å›¾icon â†’ æ‰“å¼€äººå‘˜ç½‘æ ¼ â†’ ç‚¹å‡»"æ–°å¢ž"å¡ç‰‡ â†’ è¾“å…¥åç§° â†’ ç¡®è®¤

2. **å¿«é€Ÿè·³è½¬äººå‘˜**:
   - ç‚¹å‡»Headerå³ä¾§è§†å›¾icon â†’ æ‰“å¼€äººå‘˜ç½‘æ ¼å¼¹çª— â†’ ç‚¹å‡»ç›®æ ‡äººå‘˜å¡ç‰‡ â†’ è‡ªåŠ¨è·³è½¬å¹¶å…³é—­å¼¹çª—

3. **è®°è´¦æµç¨‹**:
   - ç‚¹å‡»"è¨˜å¸³"æ¿å— â†’ é€‰æ‹©ä»˜æ¬¾äººï¼ˆå¯å¤šé€‰ï¼‰â†’ è¾“å…¥æ¯ä¸ªä»˜æ¬¾äººçš„é‡‘é¢ â†’ æ€»é‡‘é¢è‡ªåŠ¨è®¡ç®—
   - å¡«å†™é …ç›®èªªæ˜Žå’Œæ¶ˆè²»æ—¥æœŸ â†’ é€‰æ‹©å‚ä¸Žåˆ†è´¦çš„äººå‘˜ â†’ åˆ†è´¦é‡‘é¢è‡ªåŠ¨å¹³å‡åˆ†é…
   - å¯å¾®è°ƒæ¯ä¸ªäººçš„åˆ†è´¦é‡‘é¢ â†’ ä¿å­˜

4. **æŸ¥çœ‹è´¦ç›®**:
   - ç‚¹å‡»è´¦ç›®é¡¹ â†’ æŸ¥çœ‹è¯¦æƒ… â†’ å¯ç¼–è¾‘ï¼ˆåŒ…æ‹¬æ¶ˆè²»æ—¥æœŸï¼‰/åˆ é™¤/æ ‡è®°å·²æ”¯ä»˜

5. **ç»“ç®—æµç¨‹**:
   - åº•éƒ¨ç»“ç®—æ å®žæ—¶æ˜¾ç¤ºå½“å‰äººå‘˜å‡€é‡‘é¢ â†’ ç‚¹å‡»"çµç®—"æŒ‰é’® â†’ æŸ¥çœ‹æ‰€æœ‰äººå‡€é‡‘é¢ â†’ æ»šåŠ¨æŸ¥çœ‹è½¬è´¦æ–¹æ¡ˆ
   - å¯ç‚¹å‡»"é‡ç½®"æ¸…ç©ºæ‰€æœ‰è´¦ç›®å¹¶æ¢å¤é¢„è®¾äººå‘˜ï¼ˆéœ€ç¡®è®¤ï¼‰

### 5.3 è§†è§‰è®¾è®¡è¦ç‚¹
- **å¡ç‰‡å¼è®¾è®¡**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ä½¿ç”¨å¡ç‰‡å®¹å™¨
- **æ¸…æ™°çš„å±‚æ¬¡**: ä½¿ç”¨é˜´å½±å’Œé—´è·åŒºåˆ†å±‚çº§
- **é¢œè‰²ç¼–ç **: 
  - åº”æ”¶ï¼šç»¿è‰²
  - åº”ç»™ï¼šçº¢è‰²
  - ä¸­æ€§ï¼šç°è‰²
- **åŠ¨ç”»æ•ˆæžœ**: æ»‘åŠ¨ã€å±•å¼€/æ”¶èµ·ä½¿ç”¨å¹³æ»‘è¿‡æ¸¡

### 5.4 Header è®¾è®¡ç»†èŠ‚
- **ä½ç½®**: å›ºå®šåœ¨é¡¶éƒ¨ï¼Œz-index é«˜äºŽå†…å®¹åŒºåŸŸ
- **å·¦ä¾§**: æ˜¾ç¤ºå½“å‰äººå‘˜çš„é¸Ÿç±»åç§°å’Œemojiï¼ˆå¦‚ "ðŸ¦ éº»é›€"ï¼‰
- **å³ä¾§**: è§†å›¾iconï¼ˆðŸ‘ï¸ æˆ–ç½‘æ ¼å›¾æ ‡ï¼‰ï¼Œç‚¹å‡»æ‰“å¼€äººå‘˜ç½‘æ ¼å¼¹çª—
- **æ ·å¼**: èƒŒæ™¯è‰²ä¸Žå†…å®¹åŒºåŸŸåŒºåˆ†ï¼Œæœ‰è½»å¾®é˜´å½±

### 5.5 äººå‘˜ç½‘æ ¼è§†å›¾è®¾è®¡
- **å¸ƒå±€**: å“åº”å¼ç½‘æ ¼å¸ƒå±€ï¼Œæ¯è¡Œæ˜¾ç¤º2-3ä¸ªäººå‘˜å¡ç‰‡
- **äººå‘˜å¡ç‰‡**:
  - æ˜¾ç¤ºé¸Ÿç±»emojiå’Œåç§°
  - å½“å‰äººå‘˜å¡ç‰‡æœ‰é«˜äº®è¾¹æ¡†æˆ–èƒŒæ™¯è‰²
  - ç‚¹å‡»å¡ç‰‡è·³è½¬åˆ°å¯¹åº”äººå‘˜è§†å›¾
- **æ–°å¢žå¡ç‰‡**: 
  - æ˜¾ç¤ºå¤§å¤§çš„åŠ å·å›¾æ ‡ï¼ˆ+ï¼‰
  - ç‚¹å‡»åŽå¼¹å‡ºè¾“å…¥æ¡†æˆ–è¡¨å•
- **å¼¹çª—è¡Œä¸º**:
  - å…¨å±è¦†ç›–ï¼ˆå¸¦åŠé€æ˜ŽèƒŒæ™¯é®ç½©ï¼‰
  - ç‚¹å‡»é®ç½©æˆ–å…³é—­æŒ‰é’®å¯å…³é—­
  - é€‰æ‹©äººå‘˜åŽè‡ªåŠ¨å…³é—­å¹¶è·³è½¬

---

## å…­ã€æŠ€æœ¯æž¶æž„

### 6.1 é¡¹ç›®ç»“æž„
```
lets-go-dutch/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Person/
â”‚   â”‚   â”‚   â”œâ”€â”€ PersonCard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ AddPersonCard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ PersonSwiper.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ PersonGridView.vue    # äººå‘˜ç½‘æ ¼è§†å›¾å¼¹çª—
â”‚   â”‚   â”‚   â””â”€â”€ PersonGridItem.vue    # äººå‘˜ç½‘æ ¼é¡¹
â”‚   â”‚   â”œâ”€â”€ Expense/
â”‚   â”‚   â”œâ”€â”€ Settlement/
â”‚   â”‚   â””â”€â”€ Layout/
â”‚   â”‚       â””â”€â”€ AppHeader.vue         # Headerç»„ä»¶
â”‚   â”œâ”€â”€ views/               # é¡µé¢è§†å›¾
â”‚   â”‚   â””â”€â”€ PersonView.vue
â”‚   â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ usePeople.ts
â”‚   â”‚   â”œâ”€â”€ useExpenses.ts
â”‚   â”‚   â”œâ”€â”€ useSettlement.ts
â”‚   â”‚   â””â”€â”€ usePersonGrid.ts          # äººå‘˜ç½‘æ ¼è§†å›¾é€»è¾‘
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ algorithms.ts    # æ ¸å¿ƒç®—æ³•
â”‚   â”‚   â””â”€â”€ animalNames.ts   # éšæœºåŠ¨ç‰©å
â”‚   â”œâ”€â”€ types/               # TypeScript ç±»åž‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰
â”‚   â”‚   â””â”€â”€ appStore.ts
â”‚   â””â”€â”€ App.vue
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### 6.2 çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
ä½¿ç”¨ **Pinia** è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š
- `peopleStore`: äººå‘˜ç®¡ç†
- `expenseStore`: è´¦ç›®ç®¡ç†
- `uiStore`: UIçŠ¶æ€ï¼ˆå½“å‰äººå‘˜ç´¢å¼•ã€äººå‘˜ç½‘æ ¼å¼¹çª—æ˜¾ç¤ºçŠ¶æ€ç­‰ï¼‰

### 6.3 æ•°æ®æŒä¹…åŒ–
- ä½¿ç”¨ **localStorage** ä¿å­˜æ•°æ®
- æˆ–ä½¿ç”¨ **IndexedDB**ï¼ˆå¦‚æžœæ•°æ®é‡å¤§ï¼‰

---

## ä¸ƒã€å®žçŽ°ä¼˜å…ˆçº§

### Phase 1: æ ¸å¿ƒåŠŸèƒ½
1. âœ… Headerç»„ä»¶ï¼ˆæ˜¾ç¤ºå½“å‰äººå‘˜å + è§†å›¾iconï¼‰
2. âœ… äººå‘˜ç®¡ç†ï¼ˆæ·»åŠ ã€åˆ é™¤ã€é‡å‘½åï¼‰
3. âœ… äººå‘˜ç½‘æ ¼è§†å›¾ï¼ˆå¿«é€Ÿè·³è½¬å’Œæ–°å¢žï¼‰
4. âœ… åŸºç¡€è®°è´¦åŠŸèƒ½
5. âœ… è´¦ç›®åˆ—è¡¨å±•ç¤º

### Phase 2: é«˜çº§åŠŸèƒ½
4. âœ… åˆ†è´¦å¾®è°ƒ
5. âœ… ç»“ç®—è®¡ç®—
6. âœ… æœ€å°‘è½¬è´¦ç®—æ³•

### Phase 3: ä¼˜åŒ–
7. âœ… å·²ç§ä¸‹æ”¯ä»˜æ ‡è®°
8. âœ… UI/UX ä¼˜åŒ–
9. âœ… æ•°æ®æŒä¹…åŒ–

---

## å…«ã€ç®—æ³•å¤æ‚åº¦åˆ†æž

### 8.1 åˆ†è´¦è®¡ç®—
- **æ—¶é—´å¤æ‚åº¦**: O(n)ï¼Œn = åˆ†è´¦äººæ•°
- **ç©ºé—´å¤æ‚åº¦**: O(n)

### 8.2 ç»“ç®—è®¡ç®—
- **æ—¶é—´å¤æ‚åº¦**: O(m Ã— n)ï¼Œm = è´¦ç›®æ•°ï¼Œn = å¹³å‡åˆ†è´¦äººæ•°
- **ç©ºé—´å¤æ‚åº¦**: O(n)

### 8.3 æœ€å°‘è½¬è´¦ç®—æ³•
- **æ—¶é—´å¤æ‚åº¦**: O(n log n)ï¼Œn = äººå‘˜æ•°ï¼ˆæŽ’åºï¼‰
- **ç©ºé—´å¤æ‚åº¦**: O(n)

---

## ä¹ã€è¾¹ç•Œæƒ…å†µå¤„ç†

1. **åˆ é™¤äººå‘˜**: å¦‚æžœè¯¥äººå‘˜æœ‰æœªç»“ç®—çš„è´¦ç›®ï¼Œæç¤ºç”¨æˆ·
2. **é‡‘é¢æ€»å’Œ**: ç¡®ä¿åˆ†è´¦é‡‘é¢æ€»å’Œç­‰äºŽæ€»é‡‘é¢ï¼ˆå…è®¸å°æ•°ç‚¹è¯¯å·®ï¼‰
3. **ç©ºçŠ¶æ€**: æ²¡æœ‰äººå‘˜ã€æ²¡æœ‰è´¦ç›®æ—¶çš„å‹å¥½æç¤º
4. **å·²ç§ä¸‹æ”¯ä»˜**: æ ‡è®°åŽï¼Œè¯¥é‡‘é¢ä¸è®¡å…¥ç»“ç®—è®¡ç®—
5. **æ€»é‡‘é¢è®¡ç®—**: æ€»é‡‘é¢è‡ªåŠ¨ä»Žä»˜æ¬¾äººé‡‘é¢æ€»å’Œè®¡ç®—ï¼Œä¸å…è®¸æ‰‹åŠ¨ç¼–è¾‘
6. **åˆ†è´¦è‡ªåŠ¨åˆ†é…**: å½“æ€»é‡‘é¢å˜åŒ–æˆ–åˆ†è´¦äººå‘˜å˜åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¹³å‡åˆ†é…é‡‘é¢
7. **é‡ç½®åŠŸèƒ½**: é‡ç½®æ—¶æ¸…ç©ºæ‰€æœ‰è´¦ç›®å¹¶æ¢å¤é¢„è®¾ä¸¤åäººå‘˜

---

## åã€åŽç»­æ‰©å±•æ–¹å‘

1. **å¤šå¸ç§æ”¯æŒ**: æ”¯æŒä¸åŒè´§å¸çš„åˆ†è´¦
2. **åˆ†ç»„åŠŸèƒ½**: æ”¯æŒå¤šä¸ªåˆ†è´¦ç»„
3. **åŽ†å²è®°å½•**: æŸ¥çœ‹åŽ†å²ç»“ç®—è®°å½•
4. **å¯¼å‡ºåŠŸèƒ½**: å¯¼å‡ºç»“ç®—æŠ¥å‘Š
5. **äº‘ç«¯åŒæ­¥**: å¤šè®¾å¤‡æ•°æ®åŒæ­¥

---

## æ€»ç»“

æœ¬è®¾è®¡æ–‡æ¡£æ¶µç›–äº†åˆ†è´¦åº”ç”¨çš„æ ¸å¿ƒç®—æ³•ã€æ•°æ®ç»“æž„å’ŒåŠŸèƒ½æ¨¡å—ã€‚é‡ç‚¹æ˜¯æœ€å°‘è½¬è´¦æ­¥æ•°ç®—æ³•ï¼Œé‡‡ç”¨è´ªå¿ƒç­–ç•¥å¯ä»¥åœ¨ O(n log n) æ—¶é—´å†…æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œæ»¡è¶³æ—¥å¸¸ä½¿ç”¨éœ€æ±‚ã€‚

ä¸‹ä¸€æ­¥å¯ä»¥å¼€å§‹æ­å»ºé¡¹ç›®æ¡†æž¶å’Œå®žçŽ°æ ¸å¿ƒåŠŸèƒ½ã€‚
